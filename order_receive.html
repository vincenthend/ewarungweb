<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>E-Warung</title>
    <link rel="stylesheet" type="text/css" href="css/styles.css">

</head>
<body>
<div class="container">
    <div class="header">
        E-Warung
    </div>
    <div class="content">
        <div class="searchbar">
            <form>
                <input type="text" class="searchbox" placeholder="Search for food">
            </form>
        </div>
        <div class="card-content">
            <div class="content-label">Order Received</div>
            <div class="content-box" id="recommended">
                <div class="order-card-big">
                    <div class="order-header">
                        <div class="order-label">Prepare Order</div>
                        <div class="order-time">23:55</div>
                    </div>
                    <div class="order-item">
                        <div class="item-name">Es Teh Manis</div>
                        <div class="item-qty">5</div>
                    </div>
                    <div class="order-item">
                        <div class="item-name">Sayur Bening</div>
                        <div class="item-qty">30</div>
                    </div>

                    <button type="button" class="button-ready">Order Ready</button>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        // Fetch data from endpoint
        var xmlhttp;
        if (window.XMLHttpRequest) {
            xmlhttp = new XMLHttpRequest();
        } else {
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.open("GET", "https://script.google.com/macros/s/AKfycbzfGm-nwmfVcwktmtFGNY6fi2rBthYV_RuqUvVA7X1z/dev?route=getWarung", true);
        xmlhttp.send();
        xmlhttp.onreadystatechange = function () {
            if (this.readyState === 4 && this.status === 200) {/*
                  var user = document.getElementById("username");
                        var nama = document.createTextNode("Hi, " + this.response);
                        user.appendChild(nama);
                        console.log(this.response);*/
                var restoJSON = JSON.parse(this.response);
                var contentbox = document.getElementById("recommended");
                var res = restoJSON.result;
                for (var resto in res) {
                    var linking = document.createElement("a");
                    linking.href = "menu.html?id=" + res[resto].restoId;
                    var newnode = document.createElement("div");
                    newnode.className = "resto-card-big";
                    linking.appendChild(newnode);
                    var rspic = document.createElement("div");
                    rspic.className = "resto-pic-wide";
                    newnode.appendChild(rspic);
                    var rsname = document.createElement("div");
                    rsname.className = "resto-name";
                    rsname.innerHTML = res[resto].restoName;
                    newnode.appendChild(rsname);
                    var rsadd = document.createElement("div");
                    rsadd.className = "resto-address";
                    rsadd.innerHTML = res[resto].restoLoc
                    newnode.appendChild(rsadd);
                    document.getElementById("recommended").appendChild(linking);
                }
                for (var resto in res) {
                    var linking = document.createElement("a");
                    linking.href = "menu.html?id=" + res[resto].restoId;
                    var newnode = document.createElement("div");
                    newnode.className = "resto-card-small";
                    newnode.appendChild(linking);
                    var rspic = document.createElement("div");
                    rspic.className = "resto-pic-wide";
                    linking.appendChild(rspic);
                    var rsname = document.createElement("div");
                    rsname.className = "resto-name";
                    rsname.innerHTML = res[resto].restoName;
                    linking.appendChild(rsname);
                    var rsadd = document.createElement("div");
                    rsadd.className = "resto-address";
                    rsadd.innerHTML = res[resto].restoLoc
                    linking.appendChild(rsadd);
                    document.getElementById("nearest").appendChild(newnode);
                }
            }
        };
    </script>
</body>
</html>